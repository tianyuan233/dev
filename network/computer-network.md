# 计算机网络

## 五层模型

- 应用层
  - HTTP, FTP, SMTP, DNS
- 传输层
  - TCP, UDP
- 网络层
  - IP, ICMP, ARP
- 数据链路层
- 物理层

## TCP/IP

### TCP三次握手/四次挥手
TCP（传输控制协议）是一种常用的网络传输协议，它使用三次握手来建立可靠的连接。下面是**TCP三次握手**的过程：

1. 第一次握手（SYN）：客户端发送一个带有SYN（同步）标志的数据包给服务器，请求建立连接。这个数据包包含一个随机生成的序列号（Seq）。

2. 第二次握手（SYN + ACK）：服务器收到客户端的请求后，会发送一个带有SYN和ACK（确认）标志的数据包作为回应。该数据包中包含了确认号（ACK）和服务器的随机生成的序列号（Seq）。

3. 第三次握手（ACK）：客户端收到服务器的回应后，会发送一个带有ACK标志的数据包给服务器。该数据包的确认号（ACK）被设置为服务器发送的序列号加1，表示客户端已经正确接收到服务器的响应。

完成了三次握手后，TCP连接就建立起来了，双方可以开始进行数据传输。

这种三次握手的过程有以下作用：
- 客户端和服务器都确认对方的IP地址和端口号是否可达。
- 确保双方都愿意建立连接，避免无意义的连接请求。
- 对初始序列号进行同步，以便在后续的数据传输中进行正确的排序和重组。

需要注意的是，三次握手只是用于建立连接，而断开连接则需要进行四次挥手的过程。这是因为在TCP连接中，双方都有可能还有未发送完的数据，因此需要进行额外的步骤来保证数据的完整性和可靠性。

**TCP的四次挥手**是用于断开连接的过程，确保双方都完成了数据的传输和接收。下面是TCP四次挥手的过程：

1. 第一次挥手（FIN）：当客户端决定关闭连接时，它会发送一个带有FIN（结束）标志的数据包给服务器，表示不再发送数据。客户端停止发送数据，但仍可以接收服务器发送的数据。

2. 第二次挥手（ACK）：服务器收到客户端的关闭请求后，会发送一个带有ACK（确认）标志的数据包作为回应，表示已收到客户端的关闭请求。此时，服务器仍可以发送数据给客户端。

3. 第三次挥手（FIN）：当服务器准备关闭连接时，会发送一个带有FIN标志的数据包给客户端，表示服务器不再发送数据。服务器停止发送数据，但仍可以接收客户端发送的数据。

4. 第四次挥手（ACK）：客户端收到服务器的关闭请求后，会发送一个带有ACK标志的数据包作为确认。双方都知道对方已关闭连接，此时TCP连接彻底断开。

在四次挥手过程中，每个挥手阶段都需要收到对方的确认（ACK）才能继续进行下一步操作。这样可以确保双方都正常关闭连接，并且在关闭期间保证数据的可靠传输。

需要注意的是，在挥手过程中可能会出现等待状态（TIME_WAIT），用于处理可能在网络中滞留的数据包。这样可以确保之前的数据包都被正确处理，避免后续连接中出现混乱的数据。

通过四次挥手，TCP连接可以安全地关闭，释放资源，并确保数据的可靠传输和完整性。
